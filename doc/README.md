# C テストプロジェクト ドキュメント

## 📚 ドキュメント一覧

このプロジェクトの完全なドキュメント（日本語版）です。

### 1. **[プロジェクト概要](00_プロジェクト概要.md)**
   - プロジェクト目的と特徴
   - プロジェクト構成
   - 型定義
   - 外部モジュール
   - **新規ユーザー向け**: 最初にこれをお読みください

### 2. **[環境構築ガイド](01_環境構築ガイド.md)**
   - 必要な環境と前提条件
   - Ubuntu/Debian でのインストール
   - 初期セットアップ手順
   - CMake ビルド設定
   - トラブルシューティング
   - **セットアップ時**: このドキュメントに従ってください

### 3. **[モジュール別テスト説明](02_モジュール別テスト説明.md)**
   - moduleA/B/C の機能説明
   - テストケースの詳細
   - テスト実行方法
   - GTest の使い方
   - FFF スタブの基本
   - **テスト開発者向け**: テストケースの追加時に参照

### 4. **[FFF スタブ化ガイド](03_FFFスタブ化ガイド.md)**
   - FFF フレームワークの詳細説明
   - moduleC での具体的な使用例
   - FFF マクロリファレンス
   - C/C++ リンケージの注意点
   - よくあるエラーと対処法
   - **FFF を使う場合**: このドキュメントを熟読してください

### 5. **[ビルドと実行ガイド](04_ビルドと実行ガイド.md)**
   - クイックスタート
   - 詳細なビルドプロセス
   - テスト実行方法
   - カバレッジ測定
   - デバッグ方法
   - **日常的な作業**: このドキュメントを参照してください

---

## 🚀 クイックスタート

### 初めての方

1. [プロジェクト概要](00_プロジェクト概要.md) を読む
2. [環境構築ガイド](01_環境構築ガイド.md) に従ってセットアップ
3. [ビルドと実行ガイド](04_ビルドと実行ガイド.md) でビルドとテスト

### 開発者

1. [モジュール別テスト説明](02_モジュール別テスト説明.md) でテスト内容を理解
2. [FFF スタブ化ガイド](03_FFFスタブ化ガイド.md) で外部依存をスタブ化
3. テストコードを実装・実行

---

## 📖 シーン別ガイド

### シーン: 初めてプロジェクトをビルドしたい

```bash
# 1. 環境構築ガイドの「前提条件のインストール」を実行
# 2. 環境構築ガイドの「プロジェクトの初期セットアップ」を実行
cd /home/fu-ka/c_test_prj
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Debug
make -j$(nproc)

# 3. ビルドと実行ガイドの「テスト実行」を実行
ctest --output-on-failure
```

→ **参照**: [環境構築ガイド](01_環境構築ガイド.md), [ビルドと実行ガイド](04_ビルドと実行ガイド.md)

### シーン: moduleC の新しいテストケースを追加したい

```bash
# 1. モジュール別テスト説明で既存テストを理解
# 2. FFF スタブ化ガイドで必要に応じてスタブを追加
# 3. tests/moduleC/test_moduleC.cpp にテストを追加
# 4. ビルドして実行

cd build
make
./tests/moduleC/test_moduleC
```

→ **参照**: [モジュール別テスト説明](02_モジュール別テスト説明.md), [FFF スタブ化ガイド](03_FFFスタブ化ガイド.md)

### シーン: 外部モジュール関数をスタブ化したい

1. [プロジェクト概要](00_プロジェクト概要.md) で外部モジュールを確認
2. [FFF スタブ化ガイド](03_FFFスタブ化ガイド.md) の「moduleC での使用例」を参考に実装
3. テストファイルで `FAKE_VALUE_FUNC2` を宣言
4. `RESET_FAKE()` で各テスト前にリセット
5. `return_val` で戻り値を設定

→ **参照**: [FFF スタブ化ガイド](03_FFFスタブ化ガイド.md)

### シーン: ビルドエラーが発生した

1. [環境構築ガイド](01_環境構築ガイド.md) の「トラブルシューティング」を確認
2. [ビルドと実行ガイド](04_ビルドと実行ガイド.md) の「一般的な問題と解決方法」を確認
3. クリーンビルドを試す

```bash
cd /home/fu-ka/c_test_prj
rm -rf build
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Debug
make VERBOSE=1
```

→ **参照**: [環境構築ガイド](01_環境構築ガイド.md), [ビルドと実行ガイド](04_ビルドと実行ガイド.md)

### シーン: カバレッジレポートを生成したい

```bash
# 1. Debug ビルドでテスト実行
cd build
ctest

# 2. カバレッジレポート生成
gcovr --root .. --html-details coverage.html

# 3. ブラウザで表示
firefox coverage.html
```

→ **参照**: [ビルドと実行ガイド](04_ビルドと実行ガイド.md) の「カバレッジ測定」

---

## 📋 ドキュメントの一覧表

| ドキュメント | 対象者 | 主な内容 |
|-----------|--------|--------|
| 00_プロジェクト概要.md | 全員 | 概要・構成・基本情報 |
| 01_環境構築ガイド.md | 新規ユーザー | 環境構築・初期セットアップ |
| 02_モジュール別テスト説明.md | テスト開発者 | テスト内容・実行方法 |
| 03_FFFスタブ化ガイド.md | スタブ実装者 | FFF の詳細・使い方 |
| 04_ビルドと実行ガイド.md | 全開発者 | ビルド・実行・カバレッジ |

---

## 🔍 キーワード検索

### 「ビルドしたい」
→ [環境構築ガイド](01_環境構築ガイド.md), [ビルドと実行ガイド](04_ビルドと実行ガイド.md)

### 「テストを実行したい」
→ [ビルドと実行ガイド](04_ビルドと実行ガイド.md) の「テスト実行方法」

### 「テストケースを追加したい」
→ [モジュール別テスト説明](02_モジュール別テスト説明.md)

### 「外部モジュールをモック化したい」
→ [FFF スタブ化ガイド](03_FFFスタブ化ガイド.md)

### 「カバレッジレポートを見たい」
→ [ビルドと実行ガイド](04_ビルドと実行ガイド.md) の「カバレッジ測定」

### 「エラーが出た」
→ [環境構築ガイド](01_環境構築ガイド.md) または [ビルドと実行ガイド](04_ビルドと実行ガイド.md) の「トラブルシューティング」

---

## 📞 よくある質問（FAQ）

### Q. 何から始めればいい？
A. [プロジェクト概要](00_プロジェクト概要.md) を読んでから、[環境構築ガイド](01_環境構築ガイド.md) でセットアップしてください。

### Q. テストを実行するには？
A. [ビルドと実行ガイド](04_ビルドと実行ガイド.md) の「テスト実行方法」を参照してください。

### Q. 新しいテストを追加するには？
A. [モジュール別テスト説明](02_モジュール別テスト説明.md) でテストの書き方を学んでから、`tests/moduleC/test_moduleC.cpp` に追加してください。

### Q. 外部モジュール関数をモック化するには？
A. [FFF スタブ化ガイド](03_FFFスタブ化ガイド.md) を参照してください。

### Q. ビルドが失敗した
A. [環境構築ガイド](01_環境構築ガイド.md) の「トラブルシューティング」か [ビルドと実行ガイド](04_ビルドと実行ガイド.md) の「一般的な問題と解決方法」を確認してください。

---

## 📝 ドキュメント更新履歴

| 日付 | 更新内容 |
|-----|--------|
| 2025-11-09 | 初版作成 |
| | - 00_project_overview.md: プロジェクト概要 |
| | - 01_setup_guide.md: 環境構築ガイド |
| | - 02_module_tests.md: モジュール別テスト |
| | - 03_fff_guide.md: FFF スタブ化ガイド |
| | - 04_build_and_run.md: ビルドと実行 |

---

## 📌 重要なポイント

✅ **target フォルダ内のファイルには `#ifdef __cplusplus` と `extern "C"` を使用しない**
   - テストファイルで `extern "C"` ブロック内で C ソースを include する方式を使用

✅ **各テストの前に `RESET_FAKE()` を実行する**
   - スタブの状態をリセットして、テスト間の干渉を防ぐ

✅ **GTest と FFF を組み合わせて使用**
   - GTest: テストフレームワーク
   - FFF: 外部依存のスタブ化

✅ **カバレッジは Debug ビルドで測定**
   - Release ビルドではカバレッジが取得できません

---

## 📚 参考資料

- [GTest ドキュメント](https://google.github.io/googletest/)
- [FFF GitHub リポジトリ](https://github.com/meekrosoft/fff)
- [CMake ドキュメント](https://cmake.org/documentation/)

---

**最終更新**: 2025-11-09
